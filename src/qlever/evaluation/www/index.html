<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>SPARQL Engine Comparison</title>

        <!-- Bootstrap 5 -->
        <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/css/bootstrap.min.css" rel="stylesheet" />
        <link
            rel="stylesheet"
            href="https://cdn.jsdelivr.net/npm/ag-grid-community@33.3.2/styles/ag-theme-balham.css"
        />
        <!-- <link href=" https://cdn.jsdelivr.net/npm/treantjs@1.0.0/Treant.min.css " rel="stylesheet"> -->
        <!-- Custom CSS -->
        <link href="styles.css" rel="stylesheet" />
        <script src="https://unpkg.com/navigo@8.11.1/lib/navigo.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.6/dist/js/bootstrap.bundle.min.js"></script>
        <script src="https://cdn.jsdelivr.net/npm/ag-grid-community/dist/ag-grid-community.min.js"></script>
        <script src=" https://cdn.jsdelivr.net/npm/raphael@2.3.0/raphael.min.js "></script>
        <!-- <script src=" https://cdn.jsdelivr.net/npm/treantjs@1.0.0/Treant.min.js "></script> -->
        <script src="treant.js"></script>
        <script src="util.js"></script>
        <script src="details.js"></script>
        <script src="comparison.js"></script>
        <script src="main.js"></script>
    </head>
    <body>
        <a
            href="/"
            data-navigo
            class="btn btn-outline-dark position-fixed m-1 z-3"
            id="home-button"
            title="Home"
            aria-label="Home"
        >
            <svg
                xmlns="http://www.w3.org/2000/svg"
                width="20"
                height="20"
                fill="none"
                stroke="currentColor"
                stroke-width="2"
                viewBox="0 0 24 24"
            >
                <path
                    d="M3 12L12 3l9 9M4 10v10a1 1 0 001 1h5m4 0h5a1 1 0 001-1V10"
                    stroke-linecap="round"
                    stroke-linejoin="round"
                />
            </svg>
        </a>
        <div id="page-main" class="page container mt-3">
            <div class="main-title">SPARQL Engine Comparison</div>
            <div id="main-table-container"></div>
        </div>

        <div id="page-details" class="page hidden container mt-3">
            <div id="details-title" class="main-title">Query Details</div>
            <!-- Tabs here -->
            <ul class="nav nav-tabs sticky-top bg-white" id="myTab" role="tablist">
                <li class="nav-item" role="presentation">
                    <button
                        class="nav-link active text-dark"
                        id="runtimes-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#runtimes-tab-pane"
                        type="button"
                        role="tab"
                        aria-controls="runtimes-tab-pane"
                        aria-selected="true"
                    >
                        Query runtimes
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button
                        class="nav-link text-dark"
                        id="query-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#query-tab-pane"
                        type="button"
                        role="tab"
                        aria-controls="query-tab-pane"
                        aria-selected="false"
                    >
                        Full query
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button
                        class="nav-link text-dark"
                        id="exec-tree-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#exec-tree-tab-pane"
                        type="button"
                        role="tab"
                        aria-controls="exec-tree-tab-pane"
                        aria-selected="false"
                    >
                        Execution tree
                    </button>
                </li>
                <li class="nav-item" role="presentation">
                    <button
                        class="nav-link text-dark"
                        id="results-tab"
                        data-bs-toggle="tab"
                        data-bs-target="#results-tab-pane"
                        type="button"
                        role="tab"
                        aria-controls="results-tab-pane"
                        aria-selected="false"
                    >
                        Query result
                    </button>
                </li>
            </ul>
            <div class="tab-content px-3" id="myTabContent">
                <div
                    class="tab-pane fade show active"
                    id="runtimes-tab-pane"
                    role="tabpanel"
                    aria-labelledby="runtimes-tab"
                    tabindex="0"
                >
                    <!-- Tab 1 content -->

                    <div id="details-grid" class="ag-theme-balham mt-4" style="width: 100%"></div>
                </div>
                <div class="tab-pane fade" id="query-tab-pane" role="tabpanel" aria-labelledby="query-tab" tabindex="0">
                    <!-- Tab 2 content -->
                    <div class="alert alert-info mt-4">Please select a query from the Query Runtimes table!</div>
                    <div class="p-3 bg-white mt-4">
                        <pre><code id="full-query"></code></pre>
                    </div>
                </div>
                <div
                    class="tab-pane fade"
                    id="exec-tree-tab-pane"
                    role="tabpanel"
                    aria-labelledby="exec-tree-tab"
                    tabindex="0"
                >
                    <div class="alert alert-info mt-4">Please select a query from the Query Runtimes table!</div>
                    <!-- Tab 2 content -->
                    <div id="result-tree-div" class="mt-4">
                        <div class="alert alert-info mt-4">
                            Execution Tree is only available for QLever with accept header application/qlever-results+json!
                        </div>
                        <div id="meta-info"></div>
                        <div id="result-tree" style="height: calc(100vh - 280px);">
                            <br><strong style="color: red;">Please execute your query first.</strong><br><br>
                        </div>
                    </div>
                </div>
                <div
                    class="tab-pane fade"
                    id="results-tab-pane"
                    role="tabpanel"
                    aria-labelledby="results-tab"
                    tabindex="0"
                >
                    <!-- Tab 3 content -->
                    <div class="alert alert-info mt-4">Please select a query from the Query Runtimes table!</div>
                    <div id="results-container" class="mt-4">
                        <div class="alert p-2"></div>
                        <div id="results-grid" class="ag-theme-balham mt-4" style="width: 100%"></div>
                    </div>
                </div>
            </div>
        </div>

        <div id="page-comparison" class="page hidden container mt-3">
            <div id="comparison-title" class="main-title">Performance Comparison</div>
            <div class="d-flex align-items-start">
                <!-- Accordion takes most of the space -->
                <div class="flex-grow-1">
                    <div
                        class="position-relative border rounded py-1 px-3 mt-1 bg-light"
                        id="columns-checkbox-container"
                    >
                        <label class="floating-label">Engines to hide</label>
                        <div class="d-flex flex-wrap gap-3 mt-2" id="columnCheckboxContainer">
                            <!-- Checkboxes will be added here dynamically -->
                        </div>
                    </div>
                </div>

                <!-- Right-aligned checkbox -->
                <div class="form-check ms-3 mt-3">
                    <input class="form-check-input" type="checkbox" style="cursor: pointer;" id="showResultSize" />
                    <label class="form-check-label" style="cursor: pointer;" for="showResultSize"> Show result size </label>
                </div>
            </div>

            <div id="comparison-grid" class="ag-theme-balham mt-4" style="width: 100%"></div>
        </div>
    </body>
</html>
